"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[793],{1342:(e,t,n)=>{n.d(t,{Z:()=>o});const o={locationTile:"_0qMu1",locationTitle:"+Zfou",subtle:"_6bL7i",selectLocation:"_6LmF5",dark:"y1HeB",locationList:"IQ9nt",inputContainer:"_1stf8",inputAndInstruction:"mFdKM",searchBox:"LnOkp",icon:"_66OHw",textInput:"aEzBd",instructions:"JI3Oc",listItem:"A-X7r","focus-visible":"_1opBs",focusVisible:"_1opBs",recentsList:"LNJ3V",clearHistory:"WrLhK",container:"vy9CB",inlineIcon:"S3BKG",subHeading:"Sl7Lt",descriptiveText:"ptA4q",noLocation:"_4wOIQ",toolbar:"IR-Oj",lastUpdated:"O7dyh",listText:"_0-4Vl",highlighted:"GhMoN"}},3311:(e,t,n)=>{n.d(t,{_:()=>i});var o=n(2983);const i=(e,t)=>{const n=()=>{if("undefined"==typeof window)return t;try{const n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.warn(`Error reading localStorage key "${e}":`,n),t}},[i,a]=(0,o.useState)(t);return(0,o.useEffect)((()=>{a(n())}),[]),(0,o.useEffect)((()=>{const e=()=>{a(n())};return window.addEventListener("storage",e),window.addEventListener("local-storage",e),()=>{window.removeEventListener("storage",e),window.removeEventListener("local-storage",e)}}),[]),[i,t=>{"undefined"==typeof window&&console.warn(`Tried setting localStorage key "${e}" even though environment is not a client`);try{const n=t instanceof Function?t(i):t;window.localStorage.setItem(e,JSON.stringify(n)),a(n),window.dispatchEvent(new Event("local-storage"))}catch(t){console.warn(`Error setting localStorage key "${e}":`,t)}}]}},8787:(e,t,n)=>{n.d(t,{p:()=>o});const o=n(2983).createContext({getMastheadRef:()=>null})},6799:(e,t,n)=>{n.d(t,{b:()=>a});n(2983);var o=n(9752),i=n(7458);const a=e=>{const t=(0,o.L)(e);return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em","data-component":"TickCircle",...t,children:[(0,i.jsx)("circle",{cx:12,cy:12,r:9,stroke:"currentColor",strokeWidth:2}),(0,i.jsx)("path",{stroke:"currentColor",strokeWidth:2,d:"M16.5 8.5 10 15l-3-3"})]})}},2180:(e,t,n)=>{n.d(t,{w:()=>a});n(2983);var o=n(9752),i=n(7458);const a=e=>{const t=(0,o.L)(e);return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em","data-component":"AccountCircle",...t,children:[(0,i.jsx)("circle",{cx:12,cy:12,r:10,stroke:"currentColor",strokeWidth:2}),(0,i.jsx)("circle",{cx:12,cy:9,r:3,stroke:"currentColor",strokeWidth:2}),(0,i.jsx)("path",{stroke:"currentColor",strokeLinejoin:"round",strokeWidth:2,d:"M6 20a5 5 0 0 1 5-5h2a5 5 0 0 1 5 5"})]})}},2919:(e,t,n)=>{n.d(t,{L:()=>a});n(2983);var o=n(9752),i=n(7458);const a=e=>{const t=(0,o.L)(e);return(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em","data-component":"Dropdown",...t,children:(0,i.jsx)("path",{fill:"currentColor",d:"M7 10h10l-5 5-5-5z"})})}},1649:(e,t,n)=>{n.d(t,{r:()=>a});n(2983);var o=n(9752),i=n(7458);const a=e=>{const t=(0,o.L)(e);return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em","data-component":"MapPinFilled",...t,children:[(0,i.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 22c2-2 7-7 7-11.665C19 6.04 16 3 12 3s-7 3.04-7 7.335C5 15 10 20 12 22zm0-8a4 4 0 1 0 0-8 4 4 0 0 0 0 8z",clipRule:"evenodd"}),(0,i.jsx)("path",{fill:"currentColor",d:"m12 22-.707.707.707.707.707-.707L12 22zm6-11.665c0 2.008-1.094 4.21-2.562 6.247-1.447 2.01-3.144 3.71-4.145 4.71l1.414 1.415c.999-.998 2.802-2.8 4.354-4.956C18.595 15.623 20 12.991 20 10.335h-2zM12 4c3.413 0 6 2.557 6 6.335h2C20 5.523 16.587 2 12 2v2zm-6 6.335C6 6.557 8.587 4 12 4V2c-4.587 0-8 3.523-8 8.335h2zm6.707 10.958c-1.001-1.002-2.698-2.7-4.145-4.71C7.094 14.543 6 12.342 6 10.334H4c0 2.657 1.406 5.288 2.938 7.416 1.553 2.156 3.356 3.957 4.355 4.956l1.414-1.414zM15 10a3 3 0 0 1-3 3v2a5 5 0 0 0 5-5h-2zm-3-3a3 3 0 0 1 3 3h2a5 5 0 0 0-5-5v2zm-3 3a3 3 0 0 1 3-3V5a5 5 0 0 0-5 5h2zm3 3a3 3 0 0 1-3-3H7a5 5 0 0 0 5 5v-2z"})]})}},9535:(e,t,n)=>{n.d(t,{j:()=>a});n(2983);var o=n(9752),i=n(7458);const a=e=>{const t=(0,o.L)(e);return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em","data-component":"Error",...t,children:[(0,i.jsx)("circle",{cx:12,cy:12,r:9,stroke:"currentColor",strokeWidth:2}),(0,i.jsx)("path",{stroke:"currentColor",strokeWidth:2,d:"M12 17v-2m0-2V7"})]})}},8481:(e,t,n)=>{n.d(t,{k:()=>a});n(2983);var o=n(9752),i=n(7458);const a=e=>{const t=(0,o.L)(e);return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em","data-component":"Info",...t,children:[(0,i.jsx)("circle",{cx:12,cy:12,r:9,stroke:"currentColor",strokeWidth:2}),(0,i.jsx)("path",{stroke:"currentColor",strokeWidth:2,d:"M12 7v2m0 2v6"})]})}},8881:(e,t,n)=>{n.d(t,{Y:()=>p,L:()=>m});var o=n(2983),i=n.t(o,2),a=n(1464),r=n.n(a);function s(){let e;switch(((e="ABC_LD")=>{let t;var n,o,i;return"undefined"!=typeof window&&window.document&&(t=null===(n=`; ${window.document.cookie}`)||void 0===n||null===(o=n.split(` ${e}=`))||void 0===o||null===(i=o.pop())||void 0===i?void 0:i.split(";").shift()),t||""})()){case"nsw":e={id:"aurora://location/NSW3749",title:"Sydney",state:"NSW",subtitle:"NSW 2000",region:"sydney",regionName:"Sydney"};break;case"vic":e={id:"aurora://location/VIC1634",title:"Melbourne",state:"VIC",subtitle:"VIC 3000",region:"melbourne",regionName:"Melbourne"};break;case"wa":e={id:"aurora://location/WA2863",title:"Perth",state:"WA",subtitle:"WA 6000",region:"perth",regionName:"Perth"};break;case"qld":e={id:"aurora://location/QLD98646",title:"Brisbane",state:"QLD",subtitle:"QLD 4000",region:"brisbane",regionName:"Brisbane"};break;case"tas":e={id:"aurora://location/TAS274",title:"Hobart",state:"TAS",subtitle:"TAS 7000",region:"hobart",regionName:"Hobart"};break;case"act":e={id:"aurora://location/ACT93957",title:"Canberra",state:"ACT",subtitle:"ACT 2600",region:"canberra",regionName:"Canberra"};break;case"sa":e={id:"aurora://location/SA2",title:"Adelaide",state:"SA",subtitle:"SA 5000",region:"adelaide",regionName:"Adelaide"};break;case"nt":e={id:"aurora://location/NT9001",title:"Darwin",state:"NT",subtitle:"NT 0800",region:"darwin",regionName:"Darwin"};break;default:e=null}return e}var l=n(4841);const{useState:c,useEffect:d}=i;function u(){const[e,t]=c(!1),[n,o]=c({location:null,locationHistory:[],locationPreference:l.o.Empty});return d((()=>{const e=function(){try{if(window.localStorage){const e=window.localStorage.getItem("ABC_Location");if(e)return JSON.parse(e)}}catch(e){return null}}();o(e||{location:null,locationHistory:[],locationPreference:l.o.Unset}),t(!0)}),[]),d((()=>{try{e&&n&&window.localStorage&&window.localStorage.setItem("ABC_Location",JSON.stringify(n))}catch(e){return}}),[e,n]),d((()=>{if("unset"===n.locationPreference){const e=s();e&&o({locationPreference:l.o.Auto,location:e,locationHistory:[]})}}),[n]),[n,function(e,t,i){if(e===l.o.Disable)o({location:null,locationHistory:[],locationPreference:e});else if(t){let i=n.locationHistory;n.location&&t.id!==n.location.id&&n.location&&n.locationHistory&&(i=r()([...n.locationHistory,n.location].filter((e=>e.id!==t.id)).reverse(),"id").reverse().slice(-3).reverse()),o({location:t,locationHistory:i,locationPreference:e})}i&&o({...n,locationHistory:i})}]}var g=n(7458);const{createContext:h}=i,m=h({}),p=e=>{const[t,n]=u();return(0,g.jsx)("div",{"data-component":"Location",children:(0,g.jsx)(m.Provider,{value:{locationStorage:t,setLocationStorage:n},children:e.children})})}},4841:(e,t,n)=>{let o;n.d(t,{o:()=>o}),function(e){e.Empty="",e.Auto="auto",e.Manual="manual",e.Disable="disabled",e.Unset="unset"}(o||(o={}))},3034:(e,t,n)=>{n.d(t,{i:()=>_});var o=n(2983),i=n.t(o,2),a=n(7608),r=n.n(a),s=n(933),l=n(9850),c=n(6528),d=n(2914);const u=(...e)=>(t,...n)=>{e.forEach((e=>{e&&e(t,...n)}))};let g=[];const h=({highlightedItem:e,handleItemMouseMove:t,handleItemClick:n,handleKeyDown:o,getItemId:i})=>({item:a,index:r,onClick:s,onKeyDown:l,onMouseMove:c,...d})=>{g[r]=a;const h={onKeyDown:u(l,o),onMouseMove:u(c,(()=>t(r))),onClick:u(s,(()=>n(r)))};return{"aria-selected":e===r,id:i(r),role:"option",...h,...d}};function m(){return g}function p(){g=[]}const f=(e,t)=>{switch(t.type){case"selectItem":return{...e,selectedItem:t.selectedItem,isOpen:!1,inputValue:t.inputValue};case"setSearchValue":return{...e,searchValue:t.searchValue};case"setInputValue":return{...e,inputValue:t.inputValue,isOpen:!0,highlightedItem:t.highlightedItem,selectedItem:null};case"highlightItem":case"setHighlightedItem":return{...e,highlightedItem:t.highlightedItem};case"clearSelection":return{...e,selectedItem:null,inputValue:"",searchValue:"",highlightedItem:t.highlightedItem,isOpen:!1};case"toggleMenu":return{...e,isOpen:t.isOpen};default:throw new Error}},{useState:w,useEffect:y}=i,{useEffect:I,useLayoutEffect:b,useReducer:v}=i,x=e=>{const{debounceTime:t=300,id:n,clearOnBlur:o=!1,itemToString:i,onSelection:a,inputInitialValue:r,autoSelection:s}=e,l={highlightedItem:s?0:-1,selectedItem:null,inputValue:r||"",searchValue:"",isOpen:!1},[c,g]=v(f,l),{highlightedItem:x,selectedItem:L,inputValue:C,searchValue:S,isOpen:D}=c,U=`${n}-menu`,R=`${n}-label`,j=`${n}-input`,N=e=>`${n}-item-${e}`;let k,T=[];const E=e=>{g({type:"selectItem",selectedItem:e,inputValue:i(e)}),a&&a(e)},A=()=>{g({type:"clearSelection",highlightedItem:s?0:-1})};I((()=>{p()}),[C]),I((()=>{T=m(),k=T.length})),I((()=>{if(document){const e=e=>{const{target:t}=e,n=document.getElementById(j),i=document.getElementById(U);n&&i&&!((e,t,n)=>[t,n].some((t=>t&&t===e||t&&t.contains&&e instanceof Node&&t.contains(e))))(t,n,i)&&(L||!o?g({type:"toggleMenu",isOpen:!1}):A())};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}}),[L]);b((()=>{const e=(e=>{if(document)return document.getElementById(N(e))})(x),t=document.getElementById(U);e&&(0,d.Z)(e,{boundary:t,block:"nearest",scrollMode:"if-needed"})}),[x]);const O={ArrowDown(e){e.preventDefault(),!1===D&&k&&g({type:"toggleMenu",isOpen:!0}),g({type:"highlightItem",highlightedItem:(x+1)%k})},ArrowUp(e){var t;e.preventDefault(),g({type:"highlightItem",highlightedItem:(t=x)-1<0?k-1:t-1})},Enter(){const e=T[x];e&&E(e)},Escape(){A()}},P=e=>{const t=(e=>"Down"===e||"ArrowDown"===e?"ArrowDown":"Up"===e||"ArrowUp"===e?"ArrowUp":"Enter"===e||"Tab"===e?"Enter":"Esc"===e||"Escape"===e?"Escape":e)(e.key);O[t]&&O[t](e)},H=function({isOpen:e,labelId:t,menuId:n}){return o=>({role:"combobox","aria-expanded":e,"aria-haspopup":"listbox","aria-owns":e?n:void 0,"aria-labelledby":t,...o})}({isOpen:D,labelId:R,menuId:U}),B=function({inputId:e,labelId:t}){return n=>({htmlFor:e,id:t,...n})}({inputId:j,labelId:R}),V=function({labelId:e,menuId:t}){return n=>({role:"listbox","aria-labelledby":n&&n["aria-label"]?void 0:e,id:t,...n})}({labelId:R,menuId:U}),M=((e,t)=>{const[n,o]=w(e);return y((()=>{const n=setTimeout((()=>{o(e)}),t);return()=>{clearTimeout(n)}}),[e]),n})(C,t);I((()=>{g({type:"setSearchValue",searchValue:M})}),[M]);const _=function({inputId:e,menuId:t,labelId:n,inputValue:o,isOpen:i,highlightedItem:a,getItemId:r,handleKeyDown:s,inputHandleChange:l}){return({onKeyDown:c,onChange:d,...g}={})=>{const h={onKeyDown:u(c,s),onChange:u(d,l)};return{"aria-autocomplete":"both","aria-activedescendant":i&&"number"==typeof a&&a>=0?r(a):void 0,"aria-controls":i?t:void 0,"aria-labelledby":n,autoComplete:"off",value:o,id:e,...h,...g}}}({inputId:j,menuId:U,labelId:R,inputValue:C,isOpen:D,highlightedItem:x,getItemId:N,handleKeyDown:P,inputHandleChange:e=>{const t=s?0:-1;g({type:"setInputValue",inputValue:e.target.value,highlightedItem:t})}});return{getLabelProps:B,getMenuProps:V,getInputProps:_,getItemProps:h({getItemId:N,highlightedItem:x,handleItemMouseMove:e=>{e!==x&&g({type:"setHighlightedItem",highlightedItem:e})},handleItemClick:e=>{const t=T[null!=e?e:x];E(t)},handleKeyDown:P}),getContainerProps:H,selectItem:E,clearSelection:A,setHighlightedItem:e=>{g({type:"setHighlightedItem",highlightedItem:e})},highlightedItem:x,searchValue:S,isOpen:D,selectedItem:L}};var L=n(9520),C=n(9134),S=n(7127),D=n(755),U=n(8328),R=n(4841),j=n(8161),N=n(3679),k=n(1342),T=n(7458);const E=e=>{const{location:t,handleClick:n}=e;return(0,T.jsx)(j.H,{type:"unstyled",children:(0,T.jsxs)(S.z,{variant:"flat",textVariant:"none",className:k.Z.listItem,onClick:()=>n(R.o.Manual,t),children:[(0,T.jsx)("strong",{children:t.title}),", ",t.subtitle.toUpperCase()]})})},A=e=>{const{locations:t,setLocation:n,className:o}=e;return t.length?(0,T.jsx)(N.a,{type:"unstyled",className:r()(k.Z.locationList,o),"data-component":"LocationList",children:t.map((e=>(0,T.jsx)(E,{location:e,handleClick:n},e.id)))}):null};var O=n(9535),P=n(9487);const H=e=>(0,T.jsxs)("p",{className:k.Z.inlineIcon,children:[(0,T.jsx)(O.j,{size:20,className:k.Z.icon,"aria-hidden":"true"}),e.message]}),B=e=>{var t,n,o;const{loading:i,error:a,data:s,getMenuProps:l,getItemProps:c,highlightedItem:d}=e;if(i)return(0,T.jsx)(P.g,{className:k.Z.listItem,label:"Loadingâ€¦",variant:"brand",size:16,hideLabel:!1});if(a)return(0,T.jsx)(N.a,{type:"unstyled",children:[(0,T.jsx)(j.H,{type:"unstyled",children:"There was an error getting locations"},"location-selector-error")]});if(null!=s&&null!==(t=s.locations)&&void 0!==t&&t.cleared)return null;if(null!=s&&null!==(n=s.locations)&&void 0!==n&&null!==(o=n.byLocalitySearch)&&void 0!==o&&o.length){const e=s.locations.byLocalitySearch.map((e=>({id:e.id,title:e.suburb,state:e.state.id,subtitle:`${e.state.id} ${e.postcode}`,region:e.abcRegion.region,regionName:e.abcRegion.regionName})));return(0,T.jsx)("ul",{...l(),className:k.Z.locationList,"data-component":"LocationList",children:e.map(((e,t)=>{const n=c({index:t,item:e});return(0,T.jsxs)("li",{...n,className:r()(k.Z.listItem,{[k.Z.highlighted]:d===t}),children:[(0,T.jsx)("strong",{children:e.title}),","," ",e.subtitle.toUpperCase()]},e.id)}))})}return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(H,{icon:"error",message:"Sorry, no locations found"}),(0,T.jsx)("p",{children:"Please try the following:"}),(0,T.jsx)(N.a,{className:k.Z.listText,children:[(0,T.jsx)(j.H,{children:"Make sure it is spelt correctly"},"location-selector-help-1"),(0,T.jsx)(j.H,{children:"Try a different suburb or postcode"},"location-selector-help-2"),(0,T.jsx)(j.H,{children:"Check that the location is in Australia"},"location-selector-help-3")]})]})},{useEffect:V,useState:M}=i;function _(e){const{locationHistory:t,setLocationStorage:n,handleSearchQuery:o,data:i,loading:a,error:d,focusRef:u,handleClose:g}=e,[h,m]=M(!1),p="app://module/locationSelector",[f,w]=(0,l.S)({triggerOnce:!0});V((()=>{c._G.embed(p,{id:"locationSelector",contentSource:"app",contentType:"module",uri:"app://module/locationSelector"})}),[]),V((()=>{w&&c._G.moduleView(p)}),[w]);const y=(e=R.o.Manual,t)=>{n&&n(e,t),m(!1),null==g||g(),c._G.event("interact",{uri:p,trigger:"manual",action:"click",target:e}),u&&u.current&&(u.current.value="")},{getContainerProps:I,getInputProps:b,getItemProps:v,getMenuProps:j,clearSelection:N,highlightedItem:E,isOpen:O,searchValue:P}=x({onSelection:e=>{y(R.o.Manual,e),N()},itemToString:e=>e?e.title:"",id:"location-selector",debounceTime:500,clearOnBlur:!0}),H=!O&&t&&!!t.length;V((()=>{(null==P?void 0:P.trim().length)>=3&&(m(!0),c._G.event("search",{query:P.toLowerCase(),uri:""}),o(P))}),[P]);const _=b();return _["aria-labelledby"]+=" set-location-instruction",(0,T.jsxs)("div",{ref:f,"data-component":"LocationSelector",children:[(0,T.jsx)(L.u,{element:"h2",children:"Location selector"}),(0,T.jsxs)("div",{className:k.Z.inputAndInstruction,...I(),children:[(0,T.jsx)("p",{id:"set-location-instruction",className:r()(k.Z.descriptiveText,k.Z.instructions),children:"Enter a suburb or postcode in Australia and select from the list"}),(0,T.jsxs)("div",{className:k.Z.searchBox,children:[(0,T.jsx)("div",{className:k.Z.inputContainer,children:(0,T.jsx)(C.o,{label:"Enter suburb or postcode",inputRef:u,fieldClassName:k.Z.textInput,placeholder:"Enter suburb or postcode",srOnlyLabel:!0,fullWidth:!0,..._})}),g&&(0,T.jsx)(S.z,{icon:(0,T.jsx)(s.x,{"aria-hidden":"true",size:20}),variant:"no-border",onClick:g,title:"Close Location Selector","aria-label":"Close Location Selector"})]})]}),h&&O&&(i||a)&&(0,T.jsx)(B,{data:i,loading:a,error:d,getMenuProps:j,getItemProps:v,highlightedItem:E}),H?(0,T.jsxs)("div",{className:k.Z.recentsList,children:[(0,T.jsx)(D.X,{className:k.Z.subHeading,uppercase:!0,size:"xs",level:"h2",children:"Recent Locations"}),(0,T.jsx)(A,{locations:t,setLocation:y}),(0,T.jsx)(S.z,{variant:"flat",textVariant:"none",className:k.Z.clearHistory,onClick:()=>(n&&n(R.o.Manual,!1,[]),void(null==g||g())),children:"Clear recent locations"})]}):null,(0,T.jsxs)("div",{className:k.Z.container,children:[(0,T.jsxs)("p",{className:k.Z.descriptiveText,children:["We'll use your location to give you relevant local content. Read our"," ",(0,T.jsx)(U.r,{to:"https://about.abc.net.au/abc-privacy-policy/",children:"Privacy Policy"})]}),(0,T.jsxs)("p",{className:k.Z.toolbar,children:[(0,T.jsx)(S.z,{id:"disable-location",variant:"flat",textVariant:"none",className:k.Z.noLocation,onClick:()=>y(R.o.Disable,!1),children:"Don't use my location"}),g&&(0,T.jsx)(S.z,{variant:"flat",onClick:g,title:"Close location selector","aria-label":"Close location selector",children:"Close"})]})]})]})}},7596:(e,t,n)=>{n.d(t,{g:()=>l});n(2983);var o=n(7608),i=n.n(o),a=n(1649),r=n(1342),s=n(7458);const l=e=>{const{isDark:t,isOpen:n,location:o,descriptionText:l}=e;return(0,s.jsxs)("div",{className:i()(r.Z.locationTile,{[r.Z.dark]:t,[r.Z.open]:n}),"data-component":"LocationTile",children:[(0,s.jsx)(a.r,{size:20,className:r.Z.icon,"aria-hidden":"true"}),(0,s.jsxs)("div",{className:r.Z.locationTileText,children:[(0,s.jsx)("strong",{className:r.Z.locationTitle,children:o?o.title:"Set location"}),o?(0,s.jsx)("span",{className:r.Z.selectLocation,children:"Change location"}):(0,s.jsx)("span",{className:r.Z.subtle,children:l||"For local news and weather"})]})]})}},9134:(e,t,n)=>{n.d(t,{o:()=>g});n(2983);var o=n(7608),i=n.n(o),a=n(4951),r=n(6799),s=n(6995),l=n(1873),c=n(9520);const d={label:"z+0Co",disabledLabel:"HOWsJ",relative:"_7oZ31",inputField:"+Wgzj","focus-visible":"_4UqLK",focusVisible:"_4UqLK",hint:"_1gBxY",message:"Ej9kr",minimal:"h3P1a",error:"ePzlt",inputFieldError:"j1bfa",valid:"G9rJY",icon:"awruC"};var u=n(7458);const g=e=>{const{className:t,disabled:n,error:o,fieldClassName:g,fullWidth:h,hint:m,id:p,inputRef:f,label:w,marginBottom:y,message:I,multiline:b,onBlur:v,onChange:x,onFocus:L,toggleButton:C,srOnlyLabel:S,type:D="text",valid:U,value:R,minimal:j=!1,onKeyDown:N,...k}=e,T=(0,a.Z)("TextInput",k),{"data-component":E,"aria-describedby":A,...O}=T,P=b?"textarea":"input",H=i()(t,{[d.disabled]:n,[d.error]:o,[d.valid]:U}),B=i()(d.label,{[d.disabledLabel]:n,[d.minimal]:j}),V=i()(g,d.inputField,{[d.minimal]:j}),M=i()(d.message,{[d.minimal]:j,[d.disabled]:n}),_=i()(d.icon,{[d.minimal]:j,[d.valid]:U}),Z=S?(0,u.jsx)(c.u,{element:"label",htmlFor:p,className:B,children:w||null}):(0,u.jsx)("label",{htmlFor:p,className:B,children:w}),$=o&&`${p}-error`,z=m&&`${p}-hint`,W=I&&`${p}-message`,K=[$,z,W,A].filter(Boolean).join(" ")||void 0;return(0,u.jsxs)(s.L,{className:H,fullWidth:h,marginBottom:y,"data-component":E,children:[m&&!j&&(0,u.jsx)("div",{className:d.hint,id:z,children:m}),w&&!j&&Z,(0,u.jsxs)("div",{className:d.relative,children:[(0,u.jsx)(P,{id:p,"aria-describedby":K,"aria-invalid":o?"true":void 0,className:V,disabled:n,onBlur:v,onChange:x,onFocus:L,onKeyDown:N,ref:f,type:D,value:R,...O}),w&&j&&Z,C]}),U&&j&&(0,u.jsx)(r.b,{size:20,className:_}),I&&(0,u.jsx)("div",{className:M,id:W,children:I}),o&&(0,u.jsx)(l.a,{errorId:$,error:o,minimal:j})]})}},5742:(e,t,n)=>{n.d(t,{x:()=>r});var o=n(546),i=n(3714);const a={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0},r="object"==typeof window?i.Z.bind(null,{polyfill:o.do}):()=>[()=>{},a,()=>{}]},4164:(e,t,n)=>{n.d(t,{Gu:()=>a,qA:()=>K,Un:()=>G});var o=n(2983),i=n(6528);let a;!function(e){e[e.ERROR=0]="ERROR",e[e.UNINITIALISED=1]="UNINITIALISED",e[e.LOADING=2]="LOADING",e[e.READY=3]="READY"}(a||(a={}));const r={isLoggedIn:!1,loadingState:a.UNINITIALISED},s=()=>{throw new Error("@abcaustralia/profiles-react: You forgot to wrap your component in <ProfilesProvider>.")},l={...r,login:s,logout:s,signup:s,getJWT:s,refresh:s,updateUser:s,getLoginHref:s,getSignupHref:s,getSettingsHref:s,getDeleteConfirmHref:s,getLogoutConfirmHref:s,getReconsentHref:s},c=(0,o.createContext)(l),d=e=>(t=30,n=5e3)=>new Promise(((o,i)=>{let a=n/t;!function n(){return e()?o():a<0?i(new Error("@abcaustralia/profiles-react: Gigya SDK not initialised")):(a--,void setTimeout(n,t))}()})),u=d((()=>void 0!==window.gigya));async function g(){return await u(),new Promise((e=>{window.gigya.accounts.logout({callback:e})}))}async function h(e){return await u(),function(e){return new Promise(((t,n)=>{window.gigya.accounts.getJWT({...e,callback:e=>0!==e.errorCode?n(new Error(`@abcaustralia/profiles-react: ${e.errorMessage}`)):t(e)})}))}(e)}async function m(e){return await u(),function(e){return new Promise((t=>{window.gigya.socialize.notifyLogin({...e,callback:e=>(e&&0!==e.errorCode&&console.warn(`@abcaustralia/profiles-react: ${e.errorDetails}`),t())})}))}(e)}const p=e=>{const{endpoint:t,environment:n}=e;return`${{dev:"https://mylogin-api-dev.abc.net.au/latest",test:"https://mylogin-api-test.abc.net.au/latest",stage:"https://mylogin-api-stage.abc.net.au/latest",prod:"https://mylogin-api.abc.net.au/latest"}[n||"prod"]}${t}`},f=e=>({buildUpdateUserURL:()=>p({...e,endpoint:"/update-user"}),buildVerifyLoginURL:()=>p({...e,endpoint:"/verify-login"})});async function w(){return await u(),new Promise(((e,t)=>{window.gigya||t(new TypeError("window.gigya is undefined")),window.gigya.accounts.getAccountInfo({include:"id_token,data,profile",callback:e})}))}async function y({environment:e,profile:{primaryLocation:t,...n}}){const o=await w(),{UID:i,UIDSignature:a,signatureTimestamp:r}=o;return async function(e,t){const n=f({environment:e}),o=new URL(n.buildUpdateUserURL()),i=await fetch(o.toString(),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await i.json();if(a.statusCode&&"200"!==a.statusCode.toString())throw new Error(`@abcaustralia/profiles-react: update-user failed ${a.statusCode}`);return a}(e,{...{UID:null!=i?i:"",UIDSignature:null!=a?a:"",signatureTimestamp:null!=r?r:""},...n,location:t})}const I="ABCProfileProviderCache",b=e=>{const t={expires:"number",UID:"string",consentStatus:"boolean"};return Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every((n=>e[n]&&typeof e[n]===t[n]))},v=()=>{try{window.localStorage.removeItem(I)}catch(e){}},x=e=>{try{const t=window.localStorage.getItem(I);if("string"==typeof t){const n=JSON.parse(t);if(!b(n))return!1;const{UID:o,expires:i}=n;return o===e&&i&&i>Date.now()}return!1}catch(e){return!1}};var L=n(5402),C=n.n(L);function S(e){return C()("sha256").update(e.toLowerCase()).digest("hex")}async function D(e){return await u(),t=e,new Promise(((e,n)=>{window.gigya||n(new TypeError("window.gigya is undefined")),window.gigya.accounts.setAccountInfo({...t,callback:t=>0===t.errorCode?e():n()})}));var t}function U({accountType:e,email:t,fieldsNeedingReconsent:n,UID:o}){const a=n.reduce(((e,t)=>{if(!t)return e;const[n,o]=t.split(".");return o?{[n]:{[o]:{isConsentGranted:!0}},...e}:{[n]:{isConsentGranted:!0},...e}}),{});return async()=>{await D({preferences:a}),v(),i._G.push({event:"interact",user:{abcaccountid:o,...t?{emailSha256:S(t)}:{},consentStatus:!0,accountType:e},events:{action:"accept",uri:"app://profiles/reconsent-modal"}})}}async function R({APIKey:e,environment:t}){var n,o,i;await u();const a=await w(),r=0===a.errorCode;if(!r)return{isLoggedIn:r};const s={UID:a.UID||"",UIDSignature:a.UIDSignature||"",signatureTimestamp:a.signatureTimestamp||""},l=a.data.accountPreferences,c=a.data.accountType,d=a.data.abcprofile,g=null==d?void 0:d.contactPhone,h=function(e){return"m"===e?"male":"f"===e?"female":"u"===e?"not stated":["male","female","non-binary","not stated",null].includes(e)?e:null}(null==d?void 0:d.gender),m=null==d?void 0:d.lastName,p=(null==d?void 0:d.preferredName)||(null==a||null===(n=a.data)||void 0===n?void 0:n.displayName)||"",y=null==d?void 0:d.primaryLocation,I=null==d?void 0:d.yearOfBirth,b=null==d?void 0:d.avatarURL,v={UID:s.UID,accountPreferences:{personalisationEnabled:null===(o=null==l?void 0:l.personalisationEnabled)||void 0===o||o,shareHashedEmail:null===(i=null==l?void 0:l.shareHashedEmail)||void 0===i||i},accountType:c,...g&&{contactPhone:g},email:a.profile.email,...h&&{gender:h},...m&&{lastName:m},preferredName:p,...y&&{primaryLocation:y},...I&&{yearOfBirth:I},...b&&{avatarURL:b}};let L;if(x(s.UID))return L={fieldsNeedingReconsent:[],isReconsentRequired:!1},{isLoggedIn:r,auth:s,user:v,consent:L};try{const n=await async function(e,{APIKey:t,UID:n,UIDSignature:o,signatureTimestamp:i}){const a=f({environment:e}),r=new URL(a.buildVerifyLoginURL());r.search=new URLSearchParams({APIKey:t,UID:n,UIDSignature:o,signatureTimestamp:i}).toString();const s=await fetch(r.toString()),l=await s.json();if(l.statusCode&&"200"!==l.statusCode.toString())throw new Error(`@abcaustralia/profiles-react: verify-login failed ${l.statusCode}`);return l}(t,{APIKey:e,...s});if(n.consentStatus)L={isReconsentRequired:!1,fieldsNeedingReconsent:[]};else{const e=function(e=[]){return e.filter((e=>e.includes("preferences"))).map((e=>e.replace("preferences.","")))}(n.missingFields);L={isReconsentRequired:!n.consentStatus,fieldsNeedingReconsent:e,reconsent:U({UID:s.UID,accountType:v.accountType,email:v.email,fieldsNeedingReconsent:e})}}}catch(e){return console.warn("@abcaustralia/profiles-react: Could not verify login or check reconsent"),{isLoggedIn:!0,auth:s,user:v,consent:{isReconsentRequired:!1,fieldsNeedingReconsent:[]}}}return{isLoggedIn:r,auth:s,user:v,consent:L}}const j=(e,t)=>{switch(t.type){case"UPDATED":const n=a.READY;return t.user&&t.consent?{...e,isLoggedIn:!0,user:t.user,consent:t.consent,loadingState:n}:{isLoggedIn:!1,loadingState:n};case"LOADING":return{...e,loadingState:a.LOADING};case"LOGOUT":return{isLoggedIn:!1,loadingState:a.READY};case"ERROR":return{isLoggedIn:!1,loadingState:a.ERROR};default:return e}};var N=n(6366);const k="ABCAccountToken",T="ABCAccountID",E=N.Z.withConverter({read:(e,t)=>t===k?JSON.parse(decodeURIComponent(e)):decodeURIComponent(e),write:e=>"string"==typeof e?encodeURIComponent(e):encodeURIComponent(JSON.stringify(e))}),A={path:"/",domain:"undefined"!=typeof window&&"localhost"===window.location.hostname?"localhost":".abc.net.au"},O={...A,expires:730},P=()=>{E.remove(k,A),E.remove(T,A)},H="siteUID",B="UIDSig",V="UIDTimestamp";const M=e=>{const{environment:t,source:n,next:o=window.location.href,analyticsID:i,screen:a}=e,r=[o&&`next=${encodeURIComponent(o)}`,n&&`source=${n}`,i&&`cid=${i}`].filter(Boolean).join("&");return`${{dev:"https://mylogin-dev.abc.net.au/account/index.html",test:"https://mylogin-test.abc.net.au/account/index.html",stage:"https://mylogin-stage.abc.net.au/account/index.html",prod:"https://mylogin.abc.net.au/account/index.html"}[t||"prod"]}${r&&`?${r}`}${a&&`/#/${a}`}`},_=e=>({buildLoginURL:t=>M({...e,...t,screen:""}),buildSignupURL:t=>M({...e,...t,screen:"signup"}),buildSettingsURL:t=>M({...e,...t,screen:"manage-settings"}),buildReconsentURL:t=>M({...e,...t,screen:"incomplete-profile"}),buildReconsentLogoutURL:t=>M({...e,...t,screen:"reconsent-logout-confirm"}),buildReconsentDeleteURL:t=>M({...e,...t,screen:"reconsent-delete-confirm"}),loginRedirect(e){window.location.assign(this.buildLoginURL(e))},signupRedirect(e){window.location.assign(this.buildSignupURL(e))}});var Z=n(7458);const $=async()=>{const{siteUID:e,UIDSig:t,UIDTimestamp:n}=function(){try{const e=new URLSearchParams(window.location.search),t=e.get(H),n=e.get(B),o=e.get(V);return{siteUID:t&&decodeURIComponent(t),UIDSig:n&&decodeURIComponent(n),UIDTimestamp:o&&decodeURIComponent(o)}}catch(e){return{siteUID:null,UIDSig:null,UIDTimestamp:null}}}();e&&t&&n&&(await m({siteUID:e,UIDSig:t,UIDTimestamp:n}),function(){try{const e=new URLSearchParams(window.location.search);e.delete(H),e.delete(B),e.delete(V),window.history.replaceState({},"",`${window.location.pathname}?${e}`)}catch(e){return}}())},z=e=>{(e=>{if(!e)return!0;const t=E.get(k),n=E.get(T);return void 0!==t&&void 0!==n&&n===e})(e.UID)||(({UID:e,UIDSignature:t,signatureTimestamp:n})=>{E.set(k,{UID:e,UIDSignature:t,signatureTimestamp:n},A),E.set(T,e,O)})(e)},W=(e,t)=>{x(e.UID)||(e=>{try{localStorage.setItem(I,JSON.stringify(e))}catch(e){}})({UID:e.UID,consentStatus:!0,expires:Date.now()+1e3*t})},K=({analyticsID:e,APIKey:t,children:n,consentCacheExpiry:a=3600,environment:s})=>{const[l,d]=(0,o.useReducer)(j,r),u=_({environment:s,analyticsID:e}),m=(0,o.useCallback)((async()=>{const e=await R({APIKey:t,environment:s});((e,t)=>{e.isLoggedIn?(z(e.auth),e.consent.isReconsentRequired?(v(),i._G.push({user:{consentStatus:!1}})):(W(e.auth,t),i._G.push({event:"profilesSync",user:{accountType:e.user.accountType,consentStatus:!0,...e.user.email?{emailSha256:S(e.user.email)}:{},userId:e.auth.UID,preferences:e.user.accountPreferences}}))):(v(),P())})(e,a);const{user:n,consent:o}=e;d({type:"UPDATED",user:n,consent:o})}),[t,a,s]);(0,o.useEffect)((()=>{(async()=>{try{await $(),await m()}catch(e){console.warn("@abcaustralia/profiles-react: Login failed"),d({type:"ERROR"}),v(),P()}})()}),[t,e,m]);const p=(0,o.useCallback)((e=>{try{v(),u.loginRedirect(e)}catch(e){console.warn({errorType:"@abcaustralia/profiles-react",error:e})}}),[u]),f=(0,o.useCallback)((e=>{try{v(),u.signupRedirect(e)}catch(e){console.warn({errorType:"@abcaustralia/profiles-react",error:e})}}),[u]),w=(0,o.useCallback)((async({source:e="unknown"}={})=>{d({type:"LOADING"}),await g(),i._G.push({event:"logout",events:{source:e,target:window.location.hostname,trigger:"user initiated"}}),d({type:"LOGOUT"}),v(),P()}),[]),I=(0,o.useCallback)((e=>y({environment:s,profile:e})),[s]),b=(0,o.useCallback)((e=>u.buildReconsentDeleteURL(e)),[u]),x=(0,o.useCallback)((e=>u.buildLoginURL(e)),[u]),L=(0,o.useCallback)((e=>u.buildReconsentLogoutURL(e)),[u]),C=(0,o.useCallback)((e=>u.buildSettingsURL(e)),[u]),D=(0,o.useCallback)((e=>u.buildSignupURL(e)),[u]),U=(0,o.useCallback)((e=>u.buildReconsentURL(e)),[u]);return(0,Z.jsx)(c.Provider,{value:{...l,getJWT:h,login:p,logout:w,signup:f,refresh:m,updateUser:I,getDeleteConfirmHref:b,getLoginHref:x,getLogoutConfirmHref:L,getReconsentHref:U,getSettingsHref:C,getSignupHref:D},children:n})},G=()=>(0,o.useContext)(c)}}]);